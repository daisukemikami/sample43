<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title>HTMLを使ったメモ</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  </head>
  <body>
    <h1>メモ帳</h1>
    <textarea id="memo" rows="10" cols="40" name="memo"></textarea>
    <!-- <p><input type="button" id="save" value="保存"> <input type="button" id="clear" value="消去"></p> -->
    <!-- <p id="message" style="display:none;">Saving ..</p> -->
    <p><input type="button" id="clear" value="消去"></p>
    <script>
      $(function() {

        // localStorage.setItem(key, value);
        // localStorage.setItem('memo', 'ほにゃらら');
        // localStorage.getItem('memo');
        // localStorage.removeItem('memo');
        // localStorage.clear();
        // - Internet Explorerでは色々罠がある。

        if (localStorage.getItem('memo')) {
            $('#memo').val(localStorage.getItem('memo'));
        }

        $('#clear').click(function() {
          $('#memo').val('');
          localStorage.removeItem('memo');
          // localStorage.clear();
        });

        // $('#save').click(function() {
        //    localStorage.setItem('memo', $('#memo').val());
        //    // console.log(localStorage.getItem('memo'));
        // });

        // function autoSave() {
        //   localStorage.setItem('memo', $('#memo').val());
        //   setTimeout(autoSave, 1000);
        // }
        // autoSave();

        // (function autoSave() {
        //   localStorage.setItem('memo', $('#memo').val());
        //   $('#message').show().hide(200);
        //   setTimeout(autoSave, 1000);
        // })();

        $('#memo').bind('keyup', function() {
          localStorage.setItem('memo', $('#memo').val());
        });

      });
    </script>
  </body>
</html>
